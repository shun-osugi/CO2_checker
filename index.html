<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        />
        <!-- 外部CSSファイルをリンク -->
        <link rel="stylesheet" href="css/common.css" />
        <!-- 外部フォントをリンク -->
        <link
            href="https://fonts.googleapis.com/css2?family=Zen+Kurenaido&display=swap"
            rel="stylesheet"
        />
        <title>CO2チェッカー</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    </head>
    <body class="d-flex flex-column min-vh-100">
        <!-- ヘッダー -->
        <header>
            <span>CO₂チェッカー</span>
        </header>

        <div class="d-flex justify-content-center mt-4">
            <div class="card w-50 text-center">
                <div class="card-body">
                    <h5 class="card-title">現在のCO₂予測値</h5>
                    <p class="card-text display-4" id="co2-prediction">
                        --- ppm
                    </p>
                </div>
            </div>
        </div>

        <div id="border-area" class="d-flex justify-content-center mt-4">
            <div class="card w-50 text-center">
                <div class="card-body">
                    <h5 class="card-title">CO₂濃度 閾値設定</h5>
                    <div class="input-group">
                        <input
                            type="number"
                            id="co2-border-input"
                            class="form-control"
                            placeholder="閾値を設定（整数値）"
                            min="0"
                            step="1"
                        />
                        <button id="save-border-btn" class="btn btn-success">
                            保存
                        </button>
                    </div>
                    <div id="save-status" class="form-text mt-2"></div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center mt-4">
            <div class="w-50">
                <label for="graphSelector" class="form-label"
                    >表示するグラフを選択</label
                >
                <select id="graphSelector" class="form-select">
                    <option value="stage1" selected>CO₂濃度</option>
                    <option value="stage2">気温</option>
                    <option value="stage3">相対湿度</option>
                </select>
            </div>
        </div>

        <!-- グラフ表示 -->
        <div class="d-flex justify-content-center mt-5">
            <div style="position: relative; width: 500px">
                <canvas id="stage1"></canvas>
                <canvas id="stage2"></canvas>
                <canvas id="stage3"></canvas>
            </div>
        </div>

        <div id="output_csv"></div>

        <footer class="m-5 py-3 d-flex justify-content-center">
            <button id="logout-btn" class="btn btn-danger">ログアウト</button>
        </footer>

        <script src="./js/graph_draw.js" defer></script>

        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

        <script src="./js/auth.js"></script>
    </body>
</html>
